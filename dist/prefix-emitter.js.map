{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap e94c7c5e5cb84bb2c7b4","webpack:///./src/prefix-emitter.ts","webpack:///./src/es5-fallback.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;ACVA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;ACjCA,KAAM,QAAQ,GAAG,mBAAO,CAAC,CAAmB,CAAC,CAAC;AAE9C,kEAAiE;AACjE,KAAM,IAAI,GAAmB,OAAO,GAAG,KAAK,WAAW,GAAG,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC;AAC7E,KAAM,OAAO,GAAsB,OAAO,MAAM,KAAK,WAAW,GAAG,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;AAW5F;KAMI,6BAAY,IAAc,EAAE,IAAW,EAAE,OAAiB;SACtD,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;SAClB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC;SAClB,IAAI,CAAC,QAAQ,GAAG,OAAO,CAAC;SACxB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;KAC3B,CAAC;KAED,qCAAO,GAAP;SACI,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC;aACjB,MAAM,CAAC;SACX,CAAC;SACD,IAAI,CAAC,SAAS,GAAG,IAAI,CAAC;SAEtB,EAAE,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;aAC1B,UAAU,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;aAC/C,MAAM,CAAC;SACX,CAAC;SAED,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;SACtB,IAAM,SAAS,GAAG,IAAI,KAAK,EAAY,CAAC;SACxC,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;aACzC,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;aACrB,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aACxC,EAAE,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;iBAClB,MAAM,CAAC;aACX,CAAC;SACL,CAAC;SACD,UAAU,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAC;SACzC,IAAI,CAAC,YAAY,CAAC,SAAS,EAAE,IAAI,CAAC,CAAC;KACvC,CAAC;KAEO,0CAAY,GAApB,UAAqB,SAAqB,EAAE,IAAc;SACtD,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC,IAAI,CAAC,EAAE,EAAE,CAAC,EAAE,CAAC;aAC7C,IAAM,QAAM,GAAG,SAAS,CAAC,CAAC,CAAC,CAAC;aAC5B,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;iBACvD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;aAC3B,CAAC;aACD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC;iBACzD,QAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;aAC1C,CAAC;aAAC,IAAI,CAAC,CAAC;iBACJ,MAAM,CAAC;aACX,CAAC;aACD,IAAI,GAAG,QAAM,CAAC;SAClB,CAAC;SACD,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC;aACvD,IAAI,CAAC,QAAQ,GAAG,KAAK,CAAC,CAAC;SAC3B,CAAC;KACL,CAAC;KACL,0BAAC;AAAD,EAAC;AAED,qBAAoB,KAAY,EAAE,IAAS;KACvC,IAAM,KAAK,GAAG,KAAK,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KAClC,EAAE,CAAC,CAAC,KAAK,GAAG,CAAC,CAAC,CAAC,CAAC;SACZ,KAAK,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;KAC3B,CAAC;KAAC,IAAI,CAAC,EAAE,CAAC,CAAC,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;SACrB,KAAK,CAAC,KAAK,EAAE,CAAC;KAClB,CAAC;AACL,EAAC;AA0BD;KAGI;SACI,IAAI,CAAC,KAAK,GAAG,EAAE,QAAQ,EAAE,IAAI,KAAK,EAAY,EAAE,CAAC;KACrD,CAAC;KAEO,2BAAG,GAAX,UAAY,IAAW,EAAE,OAAiB;SACtC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;SACtB,GAAG,CAAC,CAAC,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,MAAM,EAAE,EAAE,CAAC,EAAE,CAAC;aACnC,EAAE,CAAC,CAAC,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;iBAC3B,IAAI,CAAC,QAAQ,GAAG,IAAI,IAAI,EAAiB,CAAC;aAC9C,CAAC;aACD,IAAI,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC;aACvC,EAAE,CAAC,CAAC,KAAK,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;iBACnB,KAAK,GAAG,EAAE,QAAQ,EAAE,IAAI,KAAK,EAAY,EAAE,CAAC;iBAC5C,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;aACtC,CAAC;aACD,IAAI,GAAG,KAAK,CAAC;SACjB,CAAC;SACD,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;SAC5B,MAAM,CAAC,IAAI,mBAAmB,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,OAAO,CAAC,CAAC;KAC9D,CAAC;KAED,0BAAE,GAAF;SAAG,cAA8B;cAA9B,WAA8B,CAA9B,sBAA8B,CAA9B,IAA8B;aAA9B,6BAA8B;;SAC7B,IAAM,SAAS,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;SACvC,EAAE,EAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;aACf,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;SACvD,CAAC;SACD,IAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAa,CAAC;SAC5C,EAAE,EAAC,OAAO,OAAO,KAAK,UAAU,CAAC,CAAC,CAAC;aAC/B,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;SACvD,CAAC;SACD,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE,OAAO,CAAC,CAAC;KACvD,CAAC;KAED,4BAAI,GAAJ;SAAK,cAA8B;cAA9B,WAA8B,CAA9B,sBAA8B,CAA9B,IAA8B;aAA9B,6BAA8B;;SAC/B,IAAM,SAAS,GAAG,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC;SACvC,EAAE,CAAC,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC;aAChB,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;SACvD,CAAC;SACD,IAAM,OAAO,GAAG,IAAI,CAAC,SAAS,CAAa,CAAC;SAC5C,EAAE,CAAC,CAAC,OAAO,OAAO,KAAK,UAAU,CAAC,CAAC,CAAC;aAChC,MAAM,IAAI,KAAK,CAAC,iCAAiC,CAAC,CAAC;SACvD,CAAC;SACD,IAAM,YAAY,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,EAAE,SAAS,CAAC,EAAE;aAAC,cAAc;kBAAd,WAAc,CAAd,sBAAc,CAAd,IAAc;iBAAd,6BAAc;;aACnE,YAAY,CAAC,OAAO,EAAE,CAAC;aACvB,OAAO,eAAI,IAAI,CAAC,CAAC;SACrB,CAAC,CAAC,CAAC;SACH,MAAM,CAAC,YAAY,CAAC;KACxB,CAAC;KAED,4BAAI,GAAJ;SAAK,cAAc;cAAd,WAAc,CAAd,sBAAc,CAAd,IAAc;aAAd,6BAAc;;SACf,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC;SACtB,IAAI,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;SAC7B,IAAI,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC;SAC3B,OAAO,IAAI,EAAE,EAAE,CAAC;aACZ,QAAQ,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC;SACvC,CAAC;SACD,IAAI,GAAQ,CAAC;SACb,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC;SACvB,OAAO,IAAI,CAAC,QAAQ,KAAK,KAAK,CAAC,IAAI,IAAI,EAAE,EAAE,CAAC;aACxC,GAAG,GAAG,IAAI,CAAC,KAAK,EAAE,CAAC;aACnB,IAAI,GAAG,IAAI,CAAC,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;aAC9B,EAAE,CAAC,CAAC,IAAI,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;iBAClB,MAAM,CAAC;aACX,CAAC;aACD,QAAQ,GAAG,IAAI,CAAC,QAAQ,CAAC;aACzB,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC;aACvB,OAAO,IAAI,EAAE,EAAE,CAAC;iBACZ,QAAQ,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,EAAE,IAAI,CAAC,CAAC;aACvC,CAAC;SACL,CAAC;KACL,CAAC;KACL,oBAAC;AAAD,EAAC;AA1EY,sBAAa,gBA0EzB;AASD,KAAM,SAAS,GAAG,OAAO,CAAC,4BAA4B,CAAC,CAAC;AACxD,KAAM,cAAc,GAAG,OAAO,CAAC,iCAAiC,CAAC,CAAC;AASlE,aAAmB,OAAsB;KAAE,cAAc;UAAd,WAAc,CAAd,sBAAc,CAAd,IAAc;SAAd,6BAAc;;KACrD,MAAM,CAAC,UAAC,MAAc,EAAE,GAAoB,EAAE,UAA8B;SACxE,IAAI,QAAQ,GAAc,MAAM,CAAC,SAAS,CAAC,CAAC;SAC5C,EAAE,CAAC,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;aACtB,MAAM,CAAC,SAAS,CAAC,GAAG,QAAQ,GAAG,IAAI,KAAK,EAAW,CAAC;SACxD,CAAC;SAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;aAC3C,MAAM,CAAC,SAAS,CAAC,GAAG,QAAQ,GAAO,QAAQ,QAAC,CAAC;SACjD,CAAC;SACD,QAAQ,CAAC,IAAI,CAAC,EAAE,gBAAO,EAAE,UAAI,EAAE,QAAG,EAAE,CAAC,CAAC;KAC1C,CAAC;AACL,EAAC;AAVe,WAAE,KAUjB;AASD,eAAqB,OAAsB;KAAE,cAAc;UAAd,WAAc,CAAd,sBAAc,CAAd,IAAc;SAAd,6BAAc;;KACvD,MAAM,CAAC,UAAC,MAAc,EAAE,GAAoB,EAAE,UAA8B;SACxE,IAAI,QAAQ,GAAc,MAAM,CAAC,SAAS,CAAC,CAAC;SAC5C,EAAE,CAAC,CAAC,QAAQ,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;aACtB,MAAM,CAAC,SAAS,CAAC,GAAG,QAAQ,GAAG,IAAI,KAAK,EAAW,CAAC;SACxD,CAAC;SAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC,MAAM,CAAC,cAAc,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;aAC3C,MAAM,CAAC,SAAS,CAAC,GAAG,QAAQ,GAAO,QAAQ,QAAC,CAAC;SACjD,CAAC;SACD,QAAQ,CAAC,IAAI,CAAC,EAAE,gBAAO,EAAE,UAAI,EAAE,QAAG,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAC;KACtD,CAAC;AACL,EAAC;AAVe,aAAI,OAUnB;AAED,8BAAoC,MAAc;KAC9C,IAAM,QAAQ,GAAc,MAAM,CAAC,SAAS,CAAC,CAAC;KAC9C,EAAE,CAAC,CAAC,QAAQ,KAAK,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC;SAChE,MAAM,CAAC,cAAc,CAAC,GAAG,QAAQ,CAAC,GAAG,CAAC,WAAC;aACnC,IAAM,MAAM,GAAa,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACpD,MAAM,CAAC,CAAC,CAAC,IAAI;mBACP,OAAC,CAAC,OAAO,EAAC,IAAI,WAAI,CAAC,CAAC,IAAI,SAAE,MAAM,GAAC;mBACjC,OAAC,CAAC,OAAO,EAAC,EAAE,WAAI,CAAC,CAAC,IAAI,SAAE,MAAM,GAAC,CAAC;;SAC1C,CAAC,CAAC,CAAC;KACP,CAAC;AACL,EAAC;AAVe,4BAAmB,sBAUlC;AAED,+BAAqC,MAAc;KAC/C,IAAM,aAAa,GAAmB,MAAM,CAAC,cAAc,CAAC,CAAC;KAC7D,EAAE,CAAC,CAAC,aAAa,KAAK,KAAK,CAAC,CAAC,CAAC,CAAC;SAC3B,aAAa,CAAC,OAAO,CAAC,WAAC,IAAM,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC;SAC7C,OAAO,MAAM,CAAC,cAAc,CAAC,CAAC;KAClC,CAAC;AACL,EAAC;AANe,6BAAoB,uBAMnC;;;;;;;AC3PD;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,E","file":"prefix-emitter.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e94c7c5e5cb84bb2c7b4\n **/","/**\r\n * Copyright (c) 2016 Dmitry Panyushkin\r\n * Available under MIT license\r\n */\r\ndeclare function require(path: string): any;\r\nconst fallback = require(\"./es5-fallback.js\");\r\n\r\n// we don't register polyfill â€” use local scoped fallback instead\r\nconst _Map: MapConstructor = typeof Map !== \"undefined\" ? Map : fallback.Map;\r\nconst _Symbol: SymbolConstructor = typeof Symbol !== \"undefined\" ? Symbol : fallback.Symbol;\r\n\r\ninterface TrieNode {\r\n    handlers: Function[],\r\n    children?: Map<any, TrieNode>,\r\n}\r\n\r\nexport interface Subscription {\r\n    dispose(): void,\r\n}\r\n\r\nclass EmitterSubscription implements Subscription {\r\n    private _node: TrieNode;\r\n    private _args: any[];\r\n    private _handler: Function;\r\n    private _disposed: boolean;\r\n\r\n    constructor(node: TrieNode, args: any[], handler: Function) {\r\n        this._node = node;\r\n        this._args = args;\r\n        this._handler = handler;\r\n        this._disposed = false;\r\n    }\r\n\r\n    dispose(): void {\r\n        if (this._disposed) {\r\n            return;\r\n        }\r\n        this._disposed = true;\r\n\r\n        if (this._args.length === 0) {\r\n            removeItem(this._node.handlers, this._handler);\r\n            return;\r\n        }\r\n        \r\n        let node = this._node;\r\n        const nodeChain = new Array<TrieNode>();\r\n        for (let i = 0; i < this._args.length; ++i) {\r\n            nodeChain.push(node);\r\n            node = node.children.get(this._args[i]);\r\n            if (node === void 0) {\r\n                return;\r\n            }\r\n        }\r\n        removeItem(node.handlers, this._handler);\r\n        this._cleanupTrie(nodeChain, node);\r\n    }\r\n\r\n    private _cleanupTrie(nodeChain: TrieNode[], node: TrieNode): void {\r\n        for (let i = nodeChain.length - 1; i >= 0; --i) {\r\n            const parent = nodeChain[i];\r\n            if (node.children !== void 0 && node.children.size === 0) {\r\n                node.children = void 0;\r\n            }\r\n            if (node.children === void 0 && node.handlers.length === 0) {\r\n                parent.children.delete(this._args[i]);\r\n            } else {\r\n                return;\r\n            }\r\n            node = parent;\r\n        }\r\n        if (node.children !== void 0 && node.children.size === 0) {\r\n            node.children = void 0;\r\n        }\r\n    }\r\n}\r\n\r\nfunction removeItem(array: any[], item: any): void {\r\n    const index = array.indexOf(item);\r\n    if (index > 0) {\r\n        array.splice(index, 1);\r\n    } else if (index === 0) {\r\n        array.shift();\r\n    }\r\n}\r\n\r\nexport interface VoidEmitter {\r\n    on(handler: () => void): Subscription;\r\n    once(handler: () => void): Subscription;\r\n    emit(): void;\r\n}\r\n\r\nexport interface SingleEmitter<T> {\r\n    on(handler: (arg: T) => void): Subscription;\r\n    on(arg: T, handler: () => void): Subscription;\r\n    once(handler: (arg: T) => void): Subscription;\r\n    once(arg: T, handler: () => void): Subscription;\r\n    emit(arg: T): void;\r\n}\r\n\r\nexport interface DoubleEmitter<TEvent, TArg> {\r\n    on(handler: (event: TEvent, arg: TArg) => void): Subscription;\r\n    on(event: TEvent, handler: (arg: TArg) => void): Subscription;\r\n    on(event: TEvent, arg: TArg, handler: () => void): Subscription;\r\n    once(handler: (event: TEvent, arg: TArg) => void): Subscription;\r\n    once(event: TEvent, handler: (arg: TArg) => void): Subscription;\r\n    once(event: TEvent, arg: TArg, handler: () => void): Subscription;\r\n    emit(event: TEvent, arg: TArg): void;\r\n}\r\n\r\nexport class PrefixEmitter implements VoidEmitter, SingleEmitter<any>, DoubleEmitter<any, any> {\r\n    private _node: TrieNode;\r\n\r\n    constructor() {\r\n        this._node = { handlers: new Array<Function>() };\r\n    }\r\n    \r\n    private _on(args: any[], handler: Function): Subscription {\r\n        let node = this._node;\r\n        for (let i = 0; i < args.length; ++i) {\r\n            if (node.children === void 0) {\r\n                node.children = new _Map<any, TrieNode>();\r\n            }\r\n            let child = node.children.get(args[i]);\r\n            if (child === void 0) {\r\n                child = { handlers: new Array<Function>() };\r\n                node.children.set(args[i], child);\r\n            }\r\n            node = child;\r\n        }\r\n        node.handlers.push(handler);\r\n        return new EmitterSubscription(this._node, args, handler);\r\n    }\r\n    \r\n    on(...args: Array<any | Function>): Subscription {\r\n        const lastIndex = arguments.length - 1;\r\n        if(lastIndex < 0) {\r\n            throw new Error(\"last argument is not a function\");\r\n        }\r\n        const handler = args[lastIndex] as Function;\r\n        if(typeof handler !== \"function\") {\r\n            throw new Error(\"last argument is not a function\");\r\n        }\r\n        return this._on(args.slice(0, lastIndex), handler);\r\n    }\r\n    \r\n    once(...args: Array<any | Function>): Subscription {\r\n        const lastIndex = arguments.length - 1;\r\n        if (lastIndex < 0) {\r\n            throw new Error(\"last argument is not a function\");\r\n        }\r\n        const handler = args[lastIndex] as Function;\r\n        if (typeof handler !== \"function\") {\r\n            throw new Error(\"last argument is not a function\");\r\n        }\r\n        const subscription = this._on(args.slice(0, lastIndex), (...args: any[]) => {\r\n            subscription.dispose();\r\n            handler(...args);\r\n        });\r\n        return subscription;\r\n    }\r\n    \r\n    emit(...args: any[]): void {\r\n        let node = this._node;\r\n        let handlers = node.handlers;\r\n        let hInd = handlers.length;\r\n        while (hInd--) {\r\n            handlers[hInd].apply(void 0, args);\r\n        }\r\n        let arg: any;\r\n        let aInd = args.length;\r\n        while (node.children !== void 0 && aInd--) {\r\n            arg = args.shift();\r\n            node = node.children.get(arg);\r\n            if (node === void 0) {\r\n                return;\r\n            }\r\n            handlers = node.handlers;\r\n            hInd = handlers.length;\r\n            while (hInd--) {\r\n                handlers[hInd].apply(void 0, args);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ninterface Handler {\r\n    emitter: PrefixEmitter,\r\n    args: any[],\r\n    key: string | symbol,\r\n    once?: boolean,\r\n}\r\n\r\nconst _handlers = _Symbol(\"__prefix_emitter_handlers_\");\r\nconst _subscriptions = _Symbol(\"__prefix_emitter_subscriptions_\");\r\n\r\nexport function on(emitter: VoidEmitter): MethodDecorator;\r\nexport function on<T>(emitter: SingleEmitter<T>): MethodDecorator;\r\nexport function on<T>(emitter: SingleEmitter<T>, arg: T): MethodDecorator;\r\nexport function on<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>): MethodDecorator;\r\nexport function on<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>, event: TEvent): MethodDecorator;\r\nexport function on<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>, event: TEvent, arg: TArg): MethodDecorator;\r\nexport function on(emitter: PrefixEmitter, ...args: any[]): MethodDecorator;\r\nexport function on(emitter: PrefixEmitter, ...args: any[]): MethodDecorator {\r\n    return (target: Object, key: string | symbol, descriptor: PropertyDescriptor) => {\r\n        let handlers: Handler[] = target[_handlers];\r\n        if (handlers === void 0) {\r\n            target[_handlers] = handlers = new Array<Handler>();\r\n        } else if (!target.hasOwnProperty(_handlers)) {\r\n            target[_handlers] = handlers = [...handlers];\r\n        }\r\n        handlers.push({ emitter, args, key });\r\n    }\r\n}\r\n\r\nexport function once(emitter: VoidEmitter): MethodDecorator;\r\nexport function once<T>(emitter: SingleEmitter<T>): MethodDecorator;\r\nexport function once<T>(emitter: SingleEmitter<T>, arg: T): MethodDecorator;\r\nexport function once<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>): MethodDecorator;\r\nexport function once<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>, event: TEvent): MethodDecorator;\r\nexport function once<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>, event: TEvent, arg: TArg): MethodDecorator;\r\nexport function once(emitter: PrefixEmitter, ...args: any[]): MethodDecorator;\r\nexport function once(emitter: PrefixEmitter, ...args: any[]): MethodDecorator {\r\n    return (target: Object, key: string | symbol, descriptor: PropertyDescriptor) => {\r\n        let handlers: Handler[] = target[_handlers];\r\n        if (handlers === void 0) {\r\n            target[_handlers] = handlers = new Array<Handler>();\r\n        } else if (!target.hasOwnProperty(_handlers)) {\r\n            target[_handlers] = handlers = [...handlers];\r\n        }\r\n        handlers.push({ emitter, args, key, once: true });\r\n    }\r\n}\r\n\r\nexport function injectSubscriptions(target: Object): void {\r\n    const handlers: Handler[] = target[_handlers];\r\n    if (handlers !== void 0 && !target.hasOwnProperty(_subscriptions)) {\r\n        target[_subscriptions] = handlers.map(h => {\r\n            const method: Function = target[h.key].bind(target);\r\n            return h.once\r\n                ? h.emitter.once(...h.args, method)\r\n                : h.emitter.on(...h.args, method);\r\n        });\r\n    }\r\n}\r\n\r\nexport function disposeSubscriptions(target: Object): void {\r\n    const subscriptions: Subscription[] = target[_subscriptions];\r\n    if (subscriptions !== void 0) {\r\n        subscriptions.forEach(s => { s.dispose(); });\r\n        delete target[_subscriptions];\r\n    }\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/prefix-emitter.ts\n **/","\"use strict\";\r\n\r\nfunction MapFallback() {\r\n    this._store = Object.create(null);\r\n    this.size = 0;\r\n}\r\n\r\nMapFallback.prototype.has = function (key) {\r\n    return this._store[key] !== void 0;\r\n}\r\n\r\nMapFallback.prototype.get = function (key) {\r\n    return this._store[key];\r\n}\r\n\r\nMapFallback.prototype.set = function (key, value) {\r\n    if (this._store[key] === void 0) {\r\n        this.size++;\r\n    }\r\n    this._store[key] = value;\r\n}\r\n\r\nMapFallback.prototype.delete = function (key) {\r\n    if (this._store[key] !== void 0) {\r\n        this.size--;\r\n        delete this._store[key];\r\n    }\r\n}\r\n\r\nfunction SymbolFallback(key) {\r\n    if (typeof key !== \"string\" && typeof key !== \"number\") {\r\n        throw new Error(\"Symbol not supported\");\r\n    }\r\n    return key;\r\n}\r\n\r\nmodule.exports = {\r\n    Map: MapFallback,\r\n    Symbol: SymbolFallback,\r\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/es5-fallback.js\n ** module id = 1\n ** module chunks = 0\n **/"],"sourceRoot":""}
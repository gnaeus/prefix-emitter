{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 303f55decf305a6fd086","webpack:///./src/prefix-emitter.ts","webpack:///./src/utils.ts","webpack:///./src/es5-fallback.js"],"names":[],"mappings":"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","file":"prefix-emitter.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 303f55decf305a6fd086\n **/","/**\r\n * Copyright (c) 2016 Dmitry Panyushkin\r\n * Available under MIT license\r\n */\r\nimport { removeItem, extendFunction, extendConstructor } from \"./utils.ts\";\r\n\r\n// call `require()` from webpack\r\ndeclare function require(path: string): any;\r\nconst fallback = require(\"./es5-fallback.js\");\r\n\r\n// we don't register polyfill - we use local scoped fallback instead\r\nconst _Map: MapConstructor = typeof Map !== \"undefined\" ? Map : fallback.Map;\r\nconst _Symbol: SymbolConstructor = typeof Symbol !== \"undefined\" ? Symbol : fallback.Symbol;\r\n\r\ninterface TrieNode {\r\n    handlers: Function[],\r\n    children?: Map<any, TrieNode>,\r\n}\r\n\r\n/**\r\n * Subscription to event at some prefix.\r\n * Used only for unsubscribe from this event by calling `dispose()` method.\r\n * @example\r\n * const subscription = emitter.on(\"event\", (arg: any) => { console.log(arg); });\r\n * subscription.dispose(); // event handler will be removed\r\n */\r\nexport interface Subscription {\r\n    dispose(): void,\r\n}\r\n\r\nclass EmitterSubscription implements Subscription {\r\n    private _node: TrieNode;\r\n    private _args: any[];\r\n    private _handler: Function;\r\n    private _disposed: boolean;\r\n\r\n    constructor(node: TrieNode, args: any[], handler: Function) {\r\n        this._node = node;\r\n        this._args = args;\r\n        this._handler = handler;\r\n        this._disposed = false;\r\n    }\r\n\r\n    dispose(): void {\r\n        if (this._disposed) {\r\n            return;\r\n        }\r\n        this._disposed = true;\r\n\r\n        if (this._args.length === 0) {\r\n            removeItem(this._node.handlers, this._handler);\r\n            return;\r\n        }\r\n        \r\n        let node = this._node;\r\n        const nodeChain = new Array<TrieNode>();\r\n        for (let i = 0; i < this._args.length; ++i) {\r\n            nodeChain.push(node);\r\n            node = node.children.get(this._args[i]);\r\n            if (node === void 0) {\r\n                return;\r\n            }\r\n        }\r\n        removeItem(node.handlers, this._handler);\r\n        this._cleanupTrie(nodeChain, node);\r\n    }\r\n\r\n    private _cleanupTrie(nodeChain: TrieNode[], node: TrieNode): void {\r\n        for (let i = nodeChain.length - 1; i >= 0; --i) {\r\n            const parent = nodeChain[i];\r\n            if (node.children !== void 0 && node.children.size === 0) {\r\n                node.children = void 0;\r\n            }\r\n            if (node.children === void 0 && node.handlers.length === 0) {\r\n                parent.children.delete(this._args[i]);\r\n            } else {\r\n                return;\r\n            }\r\n            node = parent;\r\n        }\r\n        if (node.children !== void 0 && node.children.size === 0) {\r\n            node.children = void 0;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Typed emitter without argumens.\r\n * @example\r\n * const emitter: VoidEmitter = new PrefixEmitter();\r\n * const subscription = emitter.on(() => { console.log(\"fired\"); });\r\n */\r\nexport interface VoidEmitter {\r\n    on(handler: () => void): Subscription;\r\n    once(handler: () => void): Subscription;\r\n    emit(): void;\r\n}\r\n\r\n/**\r\n * Typed emitter with one argument.\r\n * @example\r\n * const emitter: SingleEmitter<string> = new PrefixEmitter();\r\n * const sub1 = emitter.on((msg: string) => { console.log(msg); });\r\n * const sub2 = emitter.on(\"some-event\", () => { console.log(\"some-event fired\"); });\r\n */\r\nexport interface SingleEmitter<T> {\r\n    on(handler: (arg: T) => void): Subscription;\r\n    on(arg: T, handler: () => void): Subscription;\r\n    once(handler: (arg: T) => void): Subscription;\r\n    once(arg: T, handler: () => void): Subscription;\r\n    emit(arg: T): void;\r\n}\r\n\r\n/**\r\n * Typed emitter with two arguments.\r\n * @example\r\n * const emitter: DoubleEmitter<string, any> = new PrefixEmitter();\r\n * const sub1 = emitter.on(\"first-event\", (arg: any) => { console.log(\"first-event:\", arg); });\r\n * const sub2 = emitter.on(\"second-event\", (arg: any) => { console.log(\"second-event:\", arg); });\r\n */\r\nexport interface DoubleEmitter<TEvent, TArg> {\r\n    on(handler: (event: TEvent, arg: TArg) => void): Subscription;\r\n    on(event: TEvent, handler: (arg: TArg) => void): Subscription;\r\n    on(event: TEvent, arg: TArg, handler: () => void): Subscription;\r\n    once(handler: (event: TEvent, arg: TArg) => void): Subscription;\r\n    once(event: TEvent, handler: (arg: TArg) => void): Subscription;\r\n    once(event: TEvent, arg: TArg, handler: () => void): Subscription;\r\n    emit(event: TEvent, arg: TArg): void;\r\n}\r\n\r\n/**\r\n * Event Emitter which can bind handlers to events at some sequence of prefixes.\r\n * @example\r\n * const emitter = new PrefixEmitter();\r\n * const sub1 = emitter.on(\"/topic\", \"/event\", (arg: any) => {\r\n *     console.log(\"/topic/event:\", arg);\r\n * });\r\n * const sub2 = emitter.on(\"/topic\", (event: string, arg: any) => {\r\n *     console.log(\"/topic:\", event, arg);\r\n * });\r\n * emitter.emit(\"/event\", \"/subevent\", 123);\r\n * // => \"/topic/event:\", 123\r\n * // => \"/topic:\", \"/event\", 123\r\n * sub1.dispose();\r\n * sub2.dispose();\r\n */\r\nexport class PrefixEmitter implements VoidEmitter, SingleEmitter<any>, DoubleEmitter<any, any> {\r\n    private _node: TrieNode;\r\n\r\n    constructor() {\r\n        this._node = { handlers: new Array<Function>() };\r\n    }\r\n    \r\n    private _on(args: any[], handler: Function): Subscription {\r\n        let node = this._node;\r\n        for (let i = 0; i < args.length; ++i) {\r\n            if (node.children === void 0) {\r\n                node.children = new _Map<any, TrieNode>();\r\n            }\r\n            let child = node.children.get(args[i]);\r\n            if (child === void 0) {\r\n                child = { handlers: new Array<Function>() };\r\n                node.children.set(args[i], child);\r\n            }\r\n            node = child;\r\n        }\r\n        node.handlers.push(handler);\r\n        return new EmitterSubscription(this._node, args, handler);\r\n    }\r\n\r\n    /**\r\n     * Subscribe to some event from this Emitter.\r\n     * @param args Array: sequence of event prefixes and event handler function at last position\r\n     * @returns Subscription: created subscription to event\r\n     */\r\n    on(...args: Array<any | Function>): Subscription {\r\n        const lastIndex = arguments.length - 1;\r\n        if(lastIndex < 0) {\r\n            throw new Error(\"last argument is not a function\");\r\n        }\r\n        const handler = args[lastIndex] as Function;\r\n        if(typeof handler !== \"function\") {\r\n            throw new Error(\"last argument is not a function\");\r\n        }\r\n        return this._on(args.slice(0, lastIndex), handler);\r\n    }\r\n\r\n    /**\r\n     * Subscribe to some event from this Emitter. Subscription will be disposed after single handler call.\r\n     * @param args Array: sequence of event prefixes and event handler function at last position\r\n     * @returns Subscription: created subscription to event\r\n     */\r\n    once(...args: Array<any | Function>): Subscription {\r\n        const lastIndex = arguments.length - 1;\r\n        if (lastIndex < 0) {\r\n            throw new Error(\"last argument is not a function\");\r\n        }\r\n        const handler = args[lastIndex] as Function;\r\n        if (typeof handler !== \"function\") {\r\n            throw new Error(\"last argument is not a function\");\r\n        }\r\n        const subscription = this._on(args.slice(0, lastIndex), (...args: any[]) => {\r\n            subscription.dispose();\r\n            handler(...args);\r\n        });\r\n        return subscription;\r\n    }\r\n\r\n    /**\r\n     * Emit one event.\r\n     * @param args Array: event prefixes then event arguments\r\n     */\r\n    emit(...args: any[]): void {\r\n        let node = this._node;\r\n        let handlers = node.handlers;\r\n        let hInd = handlers.length;\r\n        while (hInd--) {\r\n            handlers[hInd].apply(void 0, args);\r\n        }\r\n        let arg: any;\r\n        let aInd = args.length;\r\n        while (node.children !== void 0 && aInd--) {\r\n            arg = args.shift();\r\n            node = node.children.get(arg);\r\n            if (node === void 0) {\r\n                return;\r\n            }\r\n            handlers = node.handlers;\r\n            hInd = handlers.length;\r\n            while (hInd--) {\r\n                handlers[hInd].apply(void 0, args);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\ninterface Handler {\r\n    emitter: PrefixEmitter,\r\n    args: any[],\r\n    key: string | symbol,\r\n    once?: boolean,\r\n}\r\n\r\nconst _handlers = _Symbol(\"__prefix_emitter_handlers_\");\r\nconst _subscriptions = _Symbol(\"__prefix_emitter_subscriptions_\");\r\n\r\n// overloads for different interfaces\r\nexport function on(emitter: VoidEmitter): MethodDecorator;\r\nexport function on<T>(emitter: SingleEmitter<T>): MethodDecorator;\r\nexport function on<T>(emitter: SingleEmitter<T>, arg: T): MethodDecorator;\r\nexport function on<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>): MethodDecorator;\r\nexport function on<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>, event: TEvent): MethodDecorator;\r\nexport function on<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>, event: TEvent, arg: TArg): MethodDecorator;\r\nexport function on(emitter: PrefixEmitter, ...args: any[]): MethodDecorator;\r\n\r\n/**\r\n * Method Decorator for subscribe to Emitter at some prefix described by rest parameters.\r\n * @param emitter PrefixEmitter: some emitter\r\n * @param args Array: sequence of event prefixes\r\n * @example\r\n * class Component {\r\n *     @on(emitter, \"event\")\r\n *     eventHandler(arg: any) { }\r\n * }\r\n */\r\nexport function on(emitter: PrefixEmitter, ...args: any[]): MethodDecorator {\r\n    return (target: Object, key: string | symbol) => {\r\n        let handlers: Handler[] = target[_handlers];\r\n        if (handlers === void 0) {\r\n            target[_handlers] = handlers = new Array<Handler>();\r\n        } else if (!target.hasOwnProperty(_handlers)) {\r\n            target[_handlers] = handlers = [...handlers];\r\n        }\r\n        handlers.push({ emitter, args, key });\r\n    }\r\n}\r\n\r\n\r\n// overloads for different interfaces\r\nexport function once(emitter: VoidEmitter): MethodDecorator;\r\nexport function once<T>(emitter: SingleEmitter<T>): MethodDecorator;\r\nexport function once<T>(emitter: SingleEmitter<T>, arg: T): MethodDecorator;\r\nexport function once<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>): MethodDecorator;\r\nexport function once<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>, event: TEvent): MethodDecorator;\r\nexport function once<TEvent, TArg>(emitter: DoubleEmitter<TEvent, TArg>, event: TEvent, arg: TArg): MethodDecorator;\r\nexport function once(emitter: PrefixEmitter, ...args: any[]): MethodDecorator;\r\n\r\n/**\r\n * Method Decorator for subscribe to Emitter at some prefix described by rest parameters.\r\n * Subscription will be disposed after single method call.\r\n * @param emitter PrefixEmitter: some emitter\r\n * @param args Array: sequence of event prefixes\r\n * @example\r\n * class Component {\r\n *     @once(emitter, \"event\")\r\n *     selfDisposingHandler(arg: any) { }\r\n * }\r\n */\r\nexport function once(emitter: PrefixEmitter, ...args: any[]): MethodDecorator {\r\n    return (target: Object, key: string | symbol) => {\r\n        let handlers: Handler[] = target[_handlers];\r\n        if (handlers === void 0) {\r\n            target[_handlers] = handlers = new Array<Handler>();\r\n        } else if (!target.hasOwnProperty(_handlers)) {\r\n            target[_handlers] = handlers = [...handlers];\r\n        }\r\n        handlers.push({ emitter, args, key, once: true });\r\n    }\r\n}\r\n\r\n/**\r\n * Class Decorator for injecting subscriptions defined by `@on` and `@once` annotations during constructor call.\r\n * @example\r\n * @injectSubscriptions\r\n * class Component {\r\n *     constructor() { }\r\n * }\r\n */\r\nexport function injectSubscriptions<TConstructor extends Function>(target: TConstructor): TConstructor;\r\n\r\n/**\r\n * Method Decorator for injecting subscriptions defined by `@on` and `@once` annotations during method call.\r\n * @example\r\n * class Component {\r\n *     @injectSubscriptions\r\n *     componentDidMount() { }\r\n * }\r\n */\r\nexport function injectSubscriptions(target: Object, key: string | symbol): void;\r\n\r\nexport function injectSubscriptions(target: Function | Object, key?: string | symbol) {\r\n    if (target instanceof Function) {\r\n        return extendConstructor(target, logic);\r\n    } else if (key !== void 0) {\r\n        target[key] = extendFunction(target[key], logic);\r\n        return void 0;\r\n    } else {\r\n        throw new Error(\"Decorator should be used on class or method\");\r\n    }\r\n    \r\n    function logic() {\r\n        const handlers: Handler[] = this[_handlers];\r\n        if (handlers !== void 0 && !this.hasOwnProperty(_subscriptions)) {\r\n            this[_subscriptions] = handlers.map(h => {\r\n                const method: Function = this[h.key].bind(this);\r\n                return h.once\r\n                    ? h.emitter.once(...h.args, method)\r\n                    : h.emitter.on(...h.args, method);\r\n            });\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * Method Decorator for disposing all injected subscriptions during method call.\r\n * @example\r\n * class Component {\r\n *     @disposeSubscriptions\r\n *     componentWillUnmount() { }\r\n * }\r\n */\r\nexport function disposeSubscriptions(target: Object, key: string | symbol) {\r\n    target[key] = extendFunction(target[key], function logic() {\r\n        const subscriptions: Subscription[] = this[_subscriptions];\r\n        if (subscriptions !== void 0) {\r\n            subscriptions.forEach(s => { s.dispose(); });\r\n            delete this[_subscriptions];\r\n        }\r\n    });\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/prefix-emitter.ts\n **/","/**\r\n * Remove first occurrence of given item from the array.\r\n * @param array Array\r\n * @param item any\r\n */\r\nexport function removeItem(array: any[], item: any): void {\r\n    const index = array.indexOf(item);\r\n    if (index > 0) {\r\n        array.splice(index, 1);\r\n    } else if (index === 0) {\r\n        array.shift();\r\n    }\r\n}\r\n\r\nfunction repeat(count: number, template: (i: number) => string, sep = \"\"): string {\r\n    const arr: any[] = [];\r\n    for (let i = 0; i < count; ++i) {\r\n        arr.push(template(i));\r\n    }\r\n    return arr.join(sep);\r\n}\r\n\r\n/**\r\n * Build new function from given one with injected logic at the beginning of function call.\r\n * @param target Function: target function\r\n * @param logic Function: injected logic\r\n * @returns Function\r\n */\r\nexport function extendFunction(target: Function, logic: Function): Function {\r\n    // unique prefix for Function constructor for\r\n    // eliminate conflicts with `target` functions names\r\n    const pr = \"bvjxRy0LjL9D\";\r\n\r\n    // Code generation is used to preserve target's `.name` and `.length`\r\n    // It is about 30x slower than simple funciton wrapping\r\n    // But it is slill less than 5 microseconds per call\r\n    // So if you have 200 decorated classes it took less then 1ms\r\n    const factory = new Function(pr + \"target\", pr + \"logic\", `\r\n        return function ${target.name}(${repeat(target.length, i => \"v\" + i, \", \")}) {\r\n            ${pr}logic.apply(this, arguments);\r\n            return ${pr}target.apply(this, arguments);\r\n        };\r\n    `);\r\n    return factory(target, logic);\r\n}\r\n\r\n/**\r\n * Build new constructor from given one with injected logic at the beginning of constructor call.\r\n * @param target Function: target constructor\r\n * @param logic Function: injected logic\r\n * @returns Function\r\n */\r\nexport function extendConstructor(target: Function, logic: Function): Function {\r\n    const constructor = extendFunction(target, logic);\r\n    constructor.prototype = target.prototype;\r\n    return constructor as any;\r\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils.ts\n **/","/**\r\n * Copyright (c) 2016 Dmitry Panyushkin\r\n * Available under MIT license\r\n */\r\n\"use strict\";\r\n\r\n/**\r\n * Simple fallback (not polyfill) for ES6 Map\r\n */\r\nfunction MapFallback() {\r\n    this._store = Object.create(null);\r\n    this.size = 0;\r\n}\r\n\r\nMapFallback.prototype.has = function (key) {\r\n    return this._store[key] !== void 0;\r\n}\r\n\r\nMapFallback.prototype.get = function (key) {\r\n    return this._store[key];\r\n}\r\n\r\nMapFallback.prototype.set = function (key, value) {\r\n    if (this._store[key] === void 0) {\r\n        this.size++;\r\n    }\r\n    this._store[key] = value;\r\n}\r\n\r\nMapFallback.prototype.delete = function (key) {\r\n    if (this._store[key] !== void 0) {\r\n        this.size--;\r\n        delete this._store[key];\r\n    }\r\n}\r\n\r\n/**\r\n * Fallback for ES6 Symbol\r\n */\r\nfunction SymbolFallback(key) {\r\n    if (typeof key !== \"string\" && typeof key !== \"number\") {\r\n        throw new Error(\"Symbol not supported\");\r\n    }\r\n    return key;\r\n}\r\n\r\nmodule.exports = {\r\n    Map: MapFallback,\r\n    Symbol: SymbolFallback,\r\n}\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/es5-fallback.js\n ** module id = 2\n ** module chunks = 0\n **/"],"sourceRoot":""}
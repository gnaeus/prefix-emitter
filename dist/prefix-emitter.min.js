!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var o=r[n]={exports:{},id:n,loaded:!1};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e,t){var r=e.indexOf(t);r>0?e.splice(r,1):0===r&&e.shift()}function o(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(r,n,o){var i=r[u];void 0===i?r[u]=i=new Array:r.hasOwnProperty(u)||(r[u]=i=i.slice()),i.push({emitter:e,args:t,key:n})}}function i(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(r,n,o){var i=r[u];void 0===i?r[u]=i=new Array:r.hasOwnProperty(u)||(r[u]=i=i.slice()),i.push({emitter:e,args:t,key:n,once:!0})}}function s(e){var t=e[u];void 0===t||e.hasOwnProperty(l)||(e[l]=t.map(function(t){var r=e[t.key].bind(e);return t.once?(n=t.emitter).once.apply(n,t.args.concat([r])):(o=t.emitter).on.apply(o,t.args.concat([r]));var n,o}))}function a(e){var t=e[l];void 0!==t&&(t.forEach(function(e){e.dispose()}),delete e[l])}var h=r(1),d="undefined"!=typeof Map?Map:h.Map,f="undefined"!=typeof Symbol?Symbol:h.Symbol,c=function(){function e(e,t,r){this._node=e,this._args=t,this._handler=r,this._disposed=!1}return e.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,0===this._args.length)return void n(this._node.handlers,this._handler);for(var e=this._node,t=new Array,r=0;r<this._args.length;++r)if(t.push(e),e=e.children.get(this._args[r]),void 0===e)return;n(e.handlers,this._handler),this._cleanupTrie(t,e)}},e.prototype._cleanupTrie=function(e,t){for(var r=e.length-1;r>=0;--r){var n=e[r];if(void 0!==t.children&&0===t.children.size&&(t.children=void 0),void 0!==t.children||0!==t.handlers.length)return;n.children["delete"](this._args[r]),t=n}void 0!==t.children&&0===t.children.size&&(t.children=void 0)},e}(),p=function(){function e(){this._node={handlers:new Array}}return e.prototype._on=function(e,t){for(var r=this._node,n=0;n<e.length;++n){void 0===r.children&&(r.children=new d);var o=r.children.get(e[n]);void 0===o&&(o={handlers:new Array},r.children.set(e[n],o)),r=o}return r.handlers.push(t),new c(this._node,e,t)},e.prototype.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=arguments.length-1;if(r<0)throw new Error("last argument is not a function");var n=e[r];if("function"!=typeof n)throw new Error("last argument is not a function");return this._on(e.slice(0,r),n)},e.prototype.once=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];var r=arguments.length-1;if(r<0)throw new Error("last argument is not a function");var n=e[r];if("function"!=typeof n)throw new Error("last argument is not a function");var o=this._on(e.slice(0,r),function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];o.dispose(),n.apply(void 0,e)});return o},e.prototype.emit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t-0]=arguments[t];for(var r=this._node,n=r.handlers,o=n.length;o--;)n[o].apply(void 0,e);for(var i,s=e.length;void 0!==r.children&&s--;){if(i=e.shift(),r=r.children.get(i),void 0===r)return;for(n=r.handlers,o=n.length;o--;)n[o].apply(void 0,e)}},e}();t.PrefixEmitter=p;var u=f("__prefix_emitter_handlers_"),l=f("__prefix_emitter_subscriptions_");t.on=o,t.once=i,t.injectSubscriptions=s,t.disposeSubscriptions=a},function(e,t){"use strict";function r(){this._store=Object.create(null),this.size=0}function n(e){if("string"!=typeof e&&"number"!=typeof e)throw new Error("Symbol not supported");return e}r.prototype.has=function(e){return void 0!==this._store[e]},r.prototype.get=function(e){return this._store[e]},r.prototype.set=function(e,t){void 0===this._store[e]&&this.size++,this._store[e]=t},r.prototype["delete"]=function(e){void 0!==this._store[e]&&(this.size--,delete this._store[e])},e.exports={Map:r,Symbol:n}}])});
//# sourceMappingURL=prefix-emitter.min.js.map
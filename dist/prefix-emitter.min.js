!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.PrefixEmitter=t.PrefixEmitter||{})}(this,function(t){"use strict";function n(t,n){var e=t.indexOf(n);e>0?t.splice(e,1):0===e&&t.shift()}function e(t,n,e){void 0===e&&(e="");for(var r=[],i=1;i<=t;++i)r.push(n(i));return r.join(e)}function r(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])}function i(t,n){var i="bvjxRy0LjL9D",o=new Function(i+"target",i+"logic","\n        return function "+t.name+"("+e(t.length,function(t){return"v"+t},", ")+") {\n            "+i+"logic.apply(this, arguments);\n            return "+i+"target.apply(this, arguments);\n        };\n    "),s=o(t,n);return s.prototype=t.prototype,r(s,t),s}function o(t){if("string"!=typeof t&&"number"!=typeof t)throw new Error("Symbol not supported");return t}function s(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return function(e,r){var i=e[g];void 0===i?e[g]=i=new Array:e.hasOwnProperty(g)||(e[g]=i=i.slice()),i.push({emitter:t,args:n,key:r})}}function a(t){for(var n=[],e=1;e<arguments.length;e++)n[e-1]=arguments[e];return function(e,r){var i=e[g];void 0===i?e[g]=i=new Array:e.hasOwnProperty(g)||(e[g]=i=i.slice()),i.push({emitter:t,args:n,key:r,once:!0})}}function h(t,n,e){function r(){var t=this,n=this[g];void 0===n||this.hasOwnProperty(y)||(this[y]=n.map(function(n){var e=t[n.key].bind(t);return n.once?(r=n.emitter).once.apply(r,n.args.concat([e])):(i=n.emitter).on.apply(i,n.args.concat([e]));var r,i}))}return 3===arguments.length?(e=e||Object.getOwnPropertyDescriptor(t,n),e.value=c(e.value,r),e):2===arguments.length?void(t[n]=c(t[n],r)):t instanceof Function?i(t,r):void r.call(t)}function u(t,n,e){function r(){var t=this[y];void 0!==t&&(t.forEach(function(t){t.dispose()}),delete this[y])}return 3===arguments.length?(e=e||Object.getOwnPropertyDescriptor(t,n),e.value=c(e.value,r),e):void(2===arguments.length?t[n]=c(t[n],r):r.call(t))}var c=new Function("target","logic","\n    switch (target.length) {"+e(16,function(t){return"\n        "+(t<16?"case "+t:"default")+": return function ("+e(t,function(t){return"v"+t},", ")+") {\n            logic.apply(this, arguments);\n            return target.apply(this, arguments);\n        };"})+"\n    }\n"),f=function(){function t(){this._store=Object.create(null),this.size=0}return t.prototype.has=function(t){return void 0!==this._store[t]},t.prototype.get=function(t){return this._store[t]},t.prototype.set=function(t,n){void 0===this._store[t]&&this.size++,this._store[t]=n},t.prototype.delete=function(t){void 0!==this._store[t]&&(this.size--,delete this._store[t])},t}(),l="undefined"!=typeof Map?Map:f,d="undefined"!=typeof Symbol?Symbol:o,p=function(){function t(t,n,e){this._node=t,this._args=n,this._handler=e,this._disposed=!1}return t.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,0===this._args.length)return void n(this._node.handlers,this._handler);for(var t=this._node,e=new Array,r=0;r<this._args.length;++r)if(e.push(t),t=t.children.get(this._args[r]),void 0===t)return;n(t.handlers,this._handler),this._cleanupTrie(e,t)}},t.prototype._cleanupTrie=function(t,n){for(var e=t.length-1;e>=0;--e){var r=t[e];if(void 0!==n.children&&0===n.children.size&&(n.children=void 0),void 0!==n.children||0!==n.handlers.length)return;r.children.delete(this._args[e]),n=r}void 0!==n.children&&0===n.children.size&&(n.children=void 0)},t}(),v=function(){function t(){this._node={handlers:new Array}}return t.prototype._on=function(t,n){for(var e=this._node,r=0;r<t.length;++r){void 0===e.children&&(e.children=new l);var i=e.children.get(t[r]);void 0===i&&(i={handlers:new Array},e.children.set(t[r],i)),e=i}return e.handlers.push(n),new p(this._node,t,n)},t.prototype.on=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=arguments.length-1;if(e<0)throw new Error("last argument is not a function");var r=t[e];if("function"!=typeof r)throw new Error("last argument is not a function");return this._on(t.slice(0,e),r)},t.prototype.once=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var e=arguments.length-1;if(e<0)throw new Error("last argument is not a function");var r=t[e];if("function"!=typeof r)throw new Error("last argument is not a function");var i=this._on(t.slice(0,e),function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];i.dispose(),r.apply(void 0,t)});return i},t.prototype.emit=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var e=this._node,r=e.handlers,i=r.length;i--;)r[i].apply(void 0,t);for(var o,s=t.length;void 0!==e.children&&s--;){if(o=t.shift(),e=e.children.get(o),void 0===e)return;for(r=e.handlers,i=r.length;i--;)r[i].apply(void 0,t)}},t}(),g=d("__prefix_emitter_handlers_"),y=d("__prefix_emitter_subscriptions_");t.on=s,t.once=a,t.injectSubscriptions=h,t.disposeSubscriptions=u,t.PrefixEmitter=v,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=prefix-emitter.min.js.map

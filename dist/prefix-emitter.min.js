!function(n,r){if("object"==typeof exports&&"object"==typeof module)module.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var e=r();for(var t in e)("object"==typeof exports?exports:n)[t]=e[t]}}(this,function(){return function(n){function r(t){if(e[t])return e[t].exports;var o=e[t]={exports:{},id:t,loaded:!1};return n[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var e={};return r.m=n,r.c=e,r.p="",r(0)}([function(n,r){"use strict";function e(n,r){var e=n.indexOf(r);e>0?n.splice(e,1):0===e&&n.shift()}function t(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return function(e,t,o){var i=e[d];void 0===i?e[d]=i=new Array:e.hasOwnProperty(d)||(e[d]=i=i.slice()),i.push({emitter:n,args:r,key:t})}}function o(n){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return function(e,t,o){var i=e[d];void 0===i?e[d]=i=new Array:e.hasOwnProperty(d)||(e[d]=i=i.slice()),i.push({emitter:n,args:r,key:t,once:!0})}}function i(n){var r=n[d];void 0===r||n.hasOwnProperty(c)||(n[c]=r.map(function(r){var e=n[r.key].bind(n);return r.once?(t=r.emitter).once.apply(t,r.args.concat([e])):(o=r.emitter).on.apply(o,r.args.concat([e]));var t,o}))}function s(n){var r=n[c];void 0!==r&&(r.forEach(function(n){n.dispose()}),delete n[c])}var a=function(){function n(n,r,e){this._node=n,this._args=r,this._handler=e,this._disposed=!1}return n.prototype.dispose=function(){if(!this._disposed){if(this._disposed=!0,0===this._args.length)return void e(this._node.handlers,this._handler);for(var n=this._node,r=new Array,t=0;t<this._args.length;++t)if(r.push(n),n=n.children.get(this._args[t]),void 0===n)return;e(n.handlers,this._handler),this._cleanupTrie(r,n)}},n.prototype._cleanupTrie=function(n,r){for(var e=n.length-1;e>=0;--e){var t=n[e];if(void 0!==r.children&&0===r.children.size&&(r.children=void 0),void 0!==r.children||0!==r.handlers.length)return;t.children["delete"](this._args[e]),r=t}void 0!==r.children&&0===r.children.size&&(r.children=void 0)},n}(),h=function(){function n(){this._node={handlers:new Array}}return n.prototype._on=function(n,r){for(var e=this._node,t=0;t<n.length;++t){void 0===e.children&&(e.children=new Map);var o=e.children.get(n[t]);void 0===o&&(o={handlers:new Array},e.children.set(n[t],o)),e=o}return e.handlers.push(r),new a(this._node,n,r)},n.prototype.on=function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var e=arguments.length-1;if(e<0)throw new Error("last argument is not a function");var t=n[e];if("function"!=typeof t)throw new Error("last argument is not a function");return this._on(n.slice(0,e),t)},n.prototype.once=function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];var e=arguments.length-1;if(e<0)throw new Error("last argument is not a function");var t=n[e];if("function"!=typeof t)throw new Error("last argument is not a function");var o=this._on(n.slice(0,e),function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];o.dispose(),t.apply(void 0,n)});return o},n.prototype.emit=function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];for(var e=this._node,t=e.handlers,o=t.length;o--;)t[o].apply(void 0,n);for(var i,s=n.length;void 0!==e.children&&s--;){if(i=n.shift(),e=e.children.get(i),void 0===e)return;for(t=e.handlers,o=t.length;o--;)t[o].apply(void 0,n)}},n}();r.PrefixEmitter=h;var d=Symbol("_handlers"),c=Symbol("_subscriptions");r.on=t,r.once=o,r.injectSubscriptions=i,r.disposeSubscriptions=s}])});
//# sourceMappingURL=prefix-emitter.min.js.map